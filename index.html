<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title> ¬∑ Inicio</title>
<link rel="manifest" href="manifest.json">
<style>
  body{margin:0;min-height:100vh;display:grid;place-items:center;background:#0e1420;color:#e8eef7;font-family:system-ui,-apple-system,Segoe UI,Roboto}
  .card{background:#0f1929;border:1px solid #223049;border-radius:16px;padding:24px;box-shadow:0 10px 30px rgba(0,0,0,.35);width:min(520px,92vw)}
  h1{margin:0 0 16px 0;font-size:20px}
  .row{display:flex;gap:12px;flex-wrap:wrap}
  .btn{flex:1 1 180px;background:#223049;border:1px solid #2b3b59;color:#e8eef7;padding:14px;border-radius:12px;cursor:pointer;font-weight:700}
  .muted{opacity:.7}
  input{background:#0f1929;color:#e8eef7;border:1px solid #2b3b59;border-radius:8px;padding:8px 10px}
</style>
</head>
<body>
  <div class="card">
    <h1>INGRESO</h1>
    <p class="muted">Eleg√≠ c√≥mo quer√©s ingresar:</p>
    <div class="row">
      <button class="btn" id="btnMozo">üßë‚Äçüç≥ Mozo / Tablet</button>
      <div style="display:flex;flex-direction:column;gap:8px;flex:1 1 180px">
        <button class="btn" id="btnAdmin">üë®‚Äçüíº Administrador</button>
        <div class="row" style="gap:8px"><input id="pin" placeholder="PIN admin" style="flex:1"></div>
      </div>


      <button class="btn" id="btnCocina">üç≥ Cocina</button>
<script>
document.getElementById('btnCocina').onclick = ()=> location.href='cocina.html';
</script>

   
<script>
document.getElementById('btnMozo').onclick=()=>{ location.href='mozo.html'; };
document.getElementById('btnAdmin').onclick=async()=>{
  const pin = document.getElementById('pin').value.trim();
  const cfg = await fetch('config.json').then(r=>r.json()).catch(()=>({adminPin:'1234'}));
  if(!pin){ alert('Ingres√° el PIN.'); return; }
  if(pin===cfg.adminPin){ location.href='admin.html'; } else { alert('PIN incorrecto'); }
};

if ('serviceWorker' in navigator) {
  (async () => {
    try {
      const EXPECTED = 'sw-v235.js';
      const regs = await navigator.serviceWorker.getRegistrations();
      const ok = regs.some(r => r.active?.scriptURL.includes(EXPECTED));
      if (!ok) {
        // desregistro los anteriores UNA SOLA VEZ
        await Promise.all(regs.map(r => r.unregister()));
        await navigator.serviceWorker.register(EXPECTED, { scope: './' });
        console.log('SW listo:', EXPECTED);
      }
    } catch (e) {
      console.warn('SW no disponible:', e);
    }
  })();
}


</script>
</body>
</html>
